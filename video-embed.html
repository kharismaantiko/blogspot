NOT WORKING



<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<style>
body{margin:0;padding:0;background:#000;}
video .krz-player {margin:0!important;padding:0;width:100%;height:100%;}
:root{--plyr-color-main:#ff0000;}
</style>
</head>
<body>
<div id="player"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"/>
<script type="text/javascript">
function loadCSS(c,b,f){var a=window.document.createElement('link');var d=b||window.document.getElementsByTagName('HEAD')[0];a.rel='stylesheet';a.href=c;a.media='only x';d.parentNode.insertBefore(a,d);setTimeout(function(){a.media=f||'all'})}loadCSS('https://cdn.jsdelivr.net/npm/plyr@3.6.2/dist/plyr.min.css');
</script>
<script>
$.extend({ getUrlVars: function(){
var vars = [], hash;
var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
for(var i = 0; i < hashes.length; i++) {
hash = hashes[i].split('=');
vars.push(hash[0]);
vars[hash[0]] = hash[1];
}
return vars;
},
getUrlVar: function(id){
return $.getUrlVars()[id];
},
getUrlVar: function(type){
return $.getUrlVars()[type];
}
});
$(function{
var pideoid = $.getUrlVar('id');
var pideotype = $.getUrlVar('type');
var pideo = '<video controls crossorigin playsinline poster="https://drive.google.com/thumbnail?id='+pideoid+'" id="krz-player"><source src="https://www.googleapis.com/drive/v3/files/'+pideoid+'?alt=media&key='+pideotype+"/></video>'; 
$(pideo).appendTo('#player');
});
</script>
<script src="https://cdn.jsdelivr.net/npm/plyr@3.6.2/dist/plyr.min.js"/>
<script>
const player=new Plyr('#krz-player',{controls:['play-large','play','progress','current-time','mute','volume','pip','fullscreen','speed','settings'],ads:{enabled:true,publisherId:'',tagUrl:''},ratio:'16:9'});
window.player = player;
</script>
</body>
</html>
